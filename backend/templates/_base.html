{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KXVV479GJX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KXVV479GJX');
    </script>
    <meta charset="utf-8" />
    <meta name="robots" content="index, follow" />
    <meta
      name="keywords"
      content="eurorack, diy, synthesizer, modular, music, hardware, analog synthesizer, modular synth, electronic music, synth building, sound design, music production, audio gear, circuit design"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width,minimum-scale=1,initial-scale=1"
    />
    <title>{% block title %}Bom Squad{% endblock title %}</title>
    <meta
      name="description"
      content="An inventory and search tool for DIY audio projects and components"
    />
    <meta
      name="author"
      content="https://github.com/PleatherStarfish/bomsquad"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{% static 'images/logo.png' %}"
    />
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />

    {% comment %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.9.0/dist/cookieconsent.css" />
    {% endcomment %}

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/cash-dom/dist/cash.min.js"></script>
    <script>(function(){const{protocol:n,host:o,pathname:t,search:a,hash:h}=window.location;t.endsWith("/")||t.endsWith(".html")||window.location.replace(`${n}//${o}${t}/${a}${h}`)})()</script>
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>

    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css" />
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.0/chroma.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1549230942850511"
     crossorigin="anonymous"></script>
     <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"
      />
      <!-- Include Choices.js JavaScript from CDN -->
      <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/motion@11.11.13/dist/motion.js"></script>
    {% block css %}{% endblock css %}
  </head>

  <body class="min-h-screen">
    <header>{% include "nav.html" %}</header>

    <div class="flex flex-col min-h-screen">
      {% with request.path|slice:":5" as path %}
      <div
        class="{% if path == '/user' %}w-screen grow{% else %}mb-12 mt-36 py-8 px-4 md:px-24 lg:px-48 grow{% endif %}"
      >
      {% if path == '/projects' or path == '/comp' %}
        <div id="banner" class="hidden">
          <div id="banner" class="flex flex-col w-full gap-4 p-8 rounded-lg bg-[#d4e4ea]" role="alert">
            <div class="flex flex-col w-full">
                <span class="mb-6 text-5xl text-gray-500 font-display">Support the project</span>
                <span class="text-gray-500">BOM Squad is an <a class="text-blue-500 hover:text-blue-700" href="https://github.com/PleatherStarfish/bomsquad">open-source</a> tool built and maintained by hobbyists. We rely on your support to keep us online. Subscriber on <a class="text-blue-500 hover:text-blue-700" href='https://ko-fi.com/bomsquad'>Ko-fi</a> and help choose the next module and feature we add!</span>
            </div>
            <div class="flex justify-end w-full gap-2 mt-2 sm:mt-0 sm:w-auto">
              <button id="banner-hide-button" class="w-min flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-400 hover:bg-slate-500 sm:px-3 sm:py-1.5 sm:text-sm">
                Hide
              </button>
              <a href="https://ko-fi.com/bomsquad" target="_blank" rel="noopener noreferrer" class="w-min flex items-center justify-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-slate-700 hover:bg-slate-800 sm:px-3 sm:py-1.5 sm:text-sm ml-2 whitespace-nowrap">
                Support BOM Squad
              </a>
            </div>
          </div>
        </div>
        {% endif %}
        {% block content %}{% endblock content %}
      </div>
      {% if path != '/projects' and path != '/user' %}
      <footer>{% include "footer.html" %}</footer>
      {% endif %}
      {% endwith %}
    </div>

    <script data-cookiecategory="analytics" type=\"text/javascript\" defer>\n(function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(\".\");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;\"undefined\"!==typeof c?a=b[c]=[]:c=\"mixpanel\";a.people=a.people||[];a.toString=function(a){var d=\"mixpanel\";\"mixpanel\"!==c&&(d+=\".\"+c);a||(d+=\" (stub)\");return d};a.people.toString=function(){return a.toString(1)+\".people (stub)\"};i=\"disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove\".split(\" \");\nfor(h=0;h<i.length;h++)g(a,i[h]);var j=\"set set_once union unset remove delete\".split(\" \");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=[\"get_group\"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement(\"script\");e.type=\"text/javascript\";e.async=!0;e.src=\"undefined\"!==typeof MIXPANEL_CUSTOM_LIB_URL?\nMIXPANEL_CUSTOM_LIB_URL:\"file:\"===f.location.protocol&&\"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\".match(/^\\/\\//)?\"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\":\"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\";g=f.getElementsByTagName(\"script\")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);\n</script>

    <script src="{% static 'js/base.js' %}"></script>
    <script src="{% static 'js/mobile_menu.js' %}"></script>

    <script>
      window.addEventListener('load', function() {
        var banner = cash('#banner');
        var hideButton = cash('#banner-hide-button');
        var hiddenTime = localStorage.getItem('bannerHiddenTime');
        var hideDuration = localStorage.getItem('bannerHideDuration');
    
        // Check if banner should be displayed immediately
        if (!hiddenTime || !hideDuration || Date.now() - parseInt(hiddenTime) >= parseInt(hideDuration)) {
          // No hidden time or duration set, or the duration has passed; show the banner
          banner.removeClass('hidden');
        }
    
        // Add a click event listener to the hide button
        hideButton.on('click', function() {
          // Hide the banner
          banner.addClass('hidden');
    
          // Generate a random number of days between 1 and 7
          var randomDays = Math.floor(Math.random() * 7) + 1;
    
          // Convert days to milliseconds for the duration
          var randomDuration = randomDays * 24 * 60 * 60 * 1000;
    
          // Store the current time and random duration in local storage
          localStorage.setItem('bannerHiddenTime', Date.now());
          localStorage.setItem('bannerHideDuration', randomDuration);
        });
      });
    </script>    

    <script>
      setTimeout(function() {
          document.querySelectorAll('.toast').forEach(function(toast) {
              toast.style.opacity = 0;
              setTimeout(function() {
                  toast.remove();
              }, 300);  // Matches the duration of the transition
          });
      }, 5000);  // Toasts will disappear after 5 seconds
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        tippy('[data-tippy-content]', {
          allowHTML: true,
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const logo = document.getElementById("the_logo");
        const initialScale = 1;
        const shrinkScale = 0.7; // 20% shrink
        const maxScroll = 50; // The scroll amount to reach full shrink
    
        // Set the transform origin to the top
        logo.style.transformOrigin = "top";
    
        window.addEventListener("scroll", () => {
            const scrollY = window.scrollY;
            const scale = Math.max(shrinkScale, initialScale - (scrollY / maxScroll) * (initialScale - shrinkScale));
            logo.style.transform = `scale(${scale})`;
            logo.style.transition = "transform 0.2s ease-out";
        });
    });    
    </script>

    {% block javascript %}{% endblock javascript %}
  </body>
</html>
